<div *ngIf="hasBoardAccess">
  <div class="board-options">
    <div class="members" *ngIf="boardMembers && boardMembers.length > 0">
      <span
        class="member"
        *ngFor="let member of boardMembers"
        title="{{ member.name }}"
        >{{ member.name | shortname }}</span
      >
    </div>
    <button (click)="inviteMembers()" mat-stroked-button color="primary">
      Invite
    </button>
  </div>

  <div class="content-wrapper" *ngIf="taskList && tasks && labels">
    <div class="container-wrapper">
      <div class="container" *ngFor="let list of taskList">
        <mat-card>
          <mat-card-header>
            <mat-card-title>
              <div class="list-title">
                <p>{{ list.name }}</p>
                <button mat-icon-button aria-label="drag task list">
                  <mat-icon>drag_indicator</mat-icon>
                </button>
              </div>
            </mat-card-title>
          </mat-card-header>
          <!-- <p class="empty-label" *ngIf="!tasks">Empty list</p> -->
          <mat-card-content
            cdkDropList
            id="{{ list.id }}"
            [cdkDropListData]="containerData(list.id)"
            [cdkDropListConnectedTo]="remainingList(list.id)"
            (cdkDropListDropped)="drop($event)"
            class="list"
          >
            <div *ngFor="let task of tasks">
              <task
                *ngIf="task.listId == list.id"
                (edit)="editTask($event)"
                cdkDrag
                [task]="task"
                [labels]="labels"
              ></task>
            </div>
          </mat-card-content>
          <div>
            <button
              mat-icon-button
              (click)="createNewTask(list.id)"
              aria-label="drag task list"
              matTooltip="create new task"
            >
              <mat-icon>add</mat-icon>
            </button>
            <button
              mat-icon-button
              (click)="deleteTaskList(list.id)"
              color="warn"
              aria-label="drag task list"
              matTooltip="delete task list"
            >
              <mat-icon>delete</mat-icon>
            </button>
          </div>
        </mat-card>
      </div>

      <div class="container">
        <mat-card>
          <div *ngIf="!showInputField">
            <button (click)="showInput()" mat-button color="primary">
              <mat-icon>add</mat-icon> Add New List
            </button>
          </div>

          <div *ngIf="showInputField" class="new-list-section">
            <div class="new-list-input">
              <mat-form-field>
                <mat-label>Tasklist title</mat-label>
                <input
                  matInput
                  placeholder="ToDo"
                  autocomplete="off"
                  name="listInput"
                  required
                  [(ngModel)]="listName"
                />
              </mat-form-field>
            </div>

            <div>
              <!-- <button
                (click)="createNewList()"
                mat-icon-button
                color="primary"
                aria-label="create list button"
              >
                <mat-icon>done</mat-icon>
              </button> -->

              <button
                mat-stroked-button
                (click)="createNewList()"
                aria-label="create list button"
              >
                Add
              </button>

              <button
                (click)="hideInput()"
                mat-icon-button
                color="primary"
                aria-label="cancel"
              >
                <mat-icon>close</mat-icon>
              </button>
            </div>
          </div>
        </mat-card>
      </div>
    </div>
  </div>
</div>
